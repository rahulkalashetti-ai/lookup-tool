{% extends "base.html" %}
{% block title %}Dashboard — ToolHub{% endblock %}
{% block content %}
<div class="page-header">
  <h1>Welcome back, {{ user.username }}</h1>
  <p>Here’s what you can do on ToolHub.</p>
</div>

{% if user.role == 'infosec' %}
  <div class="card card-hero">
    <h2>Verified inventory</h2>
    <p class="card-desc">Upload and manage the official tool list. Only Infosec can update it.</p>
    <div class="btn-group">
      <a href="{{ url_for('infosec_upload') }}" class="btn btn-primary">Upload verified inventory</a>
      <a href="{{ url_for('infosec_versions') }}" class="btn btn-secondary">Version history</a>
    </div>
  </div>
{% elif user.role == 'admin' %}
  <div class="card card-hero">
    <h2>Actions</h2>
    <p class="card-desc">Full access: run lookups, bulk scans, view audit log, and manage settings.</p>
    <div class="btn-group">
      <a href="{{ url_for('tool_lookup') }}" class="btn btn-primary">Lookup tool</a>
      <a href="{{ url_for('scan_upload') }}" class="btn btn-secondary">Bulk scan</a>
      <a href="{{ url_for('audit') }}" class="btn btn-secondary">Audit log</a>
      <a href="{{ url_for('admin') }}" class="btn btn-secondary">Admin</a>
    </div>
  </div>
{% else %}
  <div class="card card-hero">
    <h2>Lookup a tool</h2>
    {% if has_verified_inventory %}
      <p class="card-desc">Check if a tool is in the verified inventory. Current version: <strong>{{ inventory_version }}</strong>.</p>
      <div class="btn-group">
        <a href="{{ url_for('tool_lookup') }}" class="btn btn-primary">Lookup tool by name</a>
        <a href="{{ url_for('scan_upload') }}" class="btn btn-secondary">Bulk scan (Excel)</a>
      </div>
    {% else %}
      <div class="flash error">No verified inventory yet. Ask Infosec to upload one.</div>
    {% endif %}
  </div>
{% endif %}

<div class="card">
  <h2>Template</h2>
  <p class="card-desc">Download the Excel template with Name, Vendor Name, and optional columns.</p>
  <div class="btn-group">
    <a href="{{ url_for('download_template') }}" class="btn btn-secondary">Download template</a>
  </div>
</div>
{% endblock %}
