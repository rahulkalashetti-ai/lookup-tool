{% extends "base.html" %}
{% block title %}Lookup tool — ToolHub{% endblock %}
{% block content %}
<div class="page-header">
  <h1>Lookup tool</h1>
  <p>Search by tool name. You’ll see <strong>Yes</strong> with status, or <strong>No</strong> if it’s not in the inventory. Version <strong>{{ inventory_version }}</strong>.</p>
</div>

<div class="card">
  <form method="post" action="{{ url_for('tool_lookup') }}">
    <label for="tool_name">Tool name</label>
    <div class="search-row">
      <input id="tool_name" name="tool_name" type="text" value="{{ query }}" placeholder="e.g. Slack, Jira, GitHub" required autofocus>
      <button type="submit">Search</button>
    </div>
  </form>
</div>

{% if result is not none %}
  <div class="card result-card">
    {% if result.found %}
      <p class="flash success" style="margin-bottom: 1rem;"><strong>Yes</strong> — Tool found in inventory.</p>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Tool name</th>
              <th>Vendor</th>
              <th>Version</th>
              <th>Status</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            {% for row in result.matches %}
            <tr>
              <td><strong>{{ row.get('Tool Name', '') }}</strong></td>
              <td>{{ row.get('Vendor', '') }}</td>
              <td>{{ row.get('Version', '') }}</td>
              <td><span class="status-badge available">{{ row.get('Status', 'Available') }}</span></td>
              <td>{{ row.get('Notes', '') }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="flash error" style="margin: 0;"><strong>No</strong> — Tool not found in the verified inventory.</p>
    {% endif %}
  </div>
{% endif %}

<div class="btn-group" style="margin-top: 1rem;">
  <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Back to dashboard</a>
</div>
{% endblock %}
